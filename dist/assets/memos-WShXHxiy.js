import{r,j as e,c as m}from"./index-CQFZbpCx.js";const y="http://localhost:3001";function g(n){return n.updated_at||n.updatedAt||n.created_at||n.createdAt||""}function j(){const n=r.useMemo(()=>y,[]),[l,c]=r.useState(""),[o,d]=r.useState([]),[i,p]=r.useState(!1),[a,x]=r.useState("");r.useEffect(()=>{const s=new URLSearchParams(window.location.search).get("url")||"";s&&(c(s),h(s))},[]);const h=async t=>{if(t.trim()){p(!0),x("");try{const s=await fetch(`${n}/memos?url=${encodeURIComponent(t)}`);if(!s.ok)throw new Error(`API error: ${s.status}`);const u=await s.json();d(Array.isArray(u)?u:[])}catch(s){x(s?.message||"Ë™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü"),d([])}finally{p(!1)}}},f=t=>{t.preventDefault(),h(l)};return e.jsxs("div",{style:{width:"360px",padding:"16px",fontFamily:"sans-serif"},children:[e.jsx("h2",{children:"üåê Public URL Memo"}),e.jsxs("form",{onSubmit:f,children:[e.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px"},children:"ÂèÇÁÖßURL"}),e.jsx("input",{style:{width:"100%",marginBottom:"8px",boxSizing:"border-box",padding:"6px 8px"},value:l,onChange:t=>c(t.target.value),placeholder:"https://example.com"}),e.jsx("button",{type:"submit",style:{width:"100%"},disabled:i,children:i?"Ë™≠„ÅøËæº„Åø‰∏≠...":"„É°„É¢„ÇíÂèñÂæó"})]}),e.jsx("hr",{}),e.jsxs("h3",{children:["‰ªñ„É¶„Éº„Ç∂„Éº„ÅÆ„É°„É¢‰∏ÄË¶ß (",o.length,")"]}),a&&e.jsx("p",{style:{color:"#c00",fontSize:"12px"},children:a}),e.jsx("ul",{style:{listStyle:"none",padding:0},children:o.map(t=>e.jsxs("li",{style:{border:"1px solid #eee",padding:"8px",marginBottom:"8px",borderRadius:"4px",backgroundColor:"#f9f9f9",color:"#333"},children:[e.jsx("div",{style:{whiteSpace:"pre-wrap",marginBottom:"4px"},children:t.text}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"10px",color:"#888"},children:g(t)}),e.jsx("span",{style:{fontSize:"10px",color:"#888"},children:t.user_id?`by ${t.user_id}`:""})]})]},t.id))}),!i&&o.length===0&&!a&&e.jsx("p",{style:{textAlign:"center",color:"#888"},children:"„É°„É¢„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì"})]})}m.createRoot(document.getElementById("root")).render(e.jsx(r.StrictMode,{children:e.jsx(j,{})}));
